# 3D_Simulation
OpenGLを用いた3dシュミレーションツール。  コマンドプロンプトにて入力された文字列を反映し動作する。

## 1	ソフトウェア概要
「手旗信号」とは右手に赤旗、左手に白旗を持って行う視覚通信手段である。  
本プログラムはコマンドプロンプトにて入力された文字列(ひらがな)を取得し、その**文字列を手旗信号に変換してアニメーション化するプログラム**である。
モード選択では「選択モード」と「手旗信号モード」、「走り込みモード」の3つに分かれ各モードで異なる動作を行っている。

## 2	操作方法(インタラクション)
### 2.1	文字列操作(手旗信号モードのみ)
コマンドプロンプト内に文字列(ひらがな)を入力をすると、手旗信号に変換されアニメーションとして、入力文字と共に画面上に反映される。
カタカナや漢字入力されると、正しく入力するようもう一度入力を促す。  
入力待ち状態の際はシステムは入力待ち状態の為、画面上でのアニメーションは変化なし。
左上に「Waiting for input」が表示され入力以外の他の操作は不可
### 2.2	ロボット移動操作
*「w,a,s,d」キー*で入力された方向に移動する。  
工夫した点は歩行する際に、きちんと進行方向を向きながら、足を交互に出しながら進むよう設計したことである。他にも歩行範囲を部屋の大きさと揃えたことや、目前に来たら顔に影がかかるようにライティングの位置を工夫した。

### 2.3	視点操作
移動操作は左手・視点操作は右手といった風に、操作性のしやすさを意識した設計になっている。以下が視点操作の各操作方法である。
#### 2.3.1	拡大操作(z軸上)
右クリック長押し状態での前後のカーソル移動。
#### 2.3.2	回転操作(z軸)
右クリック長押し状態での左右のカーソル移動。
#### 2.3.3	視点位置回転操作(x軸y軸)
左クリック長押し状態で上下左右にカーソル移動
	 
### 2.4	手旗信号アニメーション停止機能(手旗信号モードのみ)
お散歩機能と同様、テキスト入力待ち状態でない状態で操作可能である。  
*「スペースキー」*でアニメーションの停止・再生を切り替え操作できる。
停止時には左上に「STOP」表記が出現。
### 2.5	画面状態初期化機能
お散歩機能と同様、テキスト入力待ち状態でない状態で操作可能である。  
*「Rボタン」*で移動したロボット位置や視点を初期位置に戻す。
###2.6	モード変更操作
起動直後及びお散歩モード中に操作可能。(＝選択モード時)  
指定された番号でモード変更が可能。
異なる数字を入力すると正しく入力するようもう一度入力を促す。
お散歩モード時は画面上にて*「cボタン」*で選択モードに遷移
### 2.7	終了操作
お散歩機能と同様、テキスト入力待ち状態でない状態で操作可能である。
*「esc」*キーでソフトウェアを落とす。
 
## 3	アルゴリズム
こだわったアルゴリズムは、テキスト入力を手旗信号に変換する処理部分である。ひらがな一文字一文字に対して、動きの流れ、反転の判定、ローマ字表記を定義しており、動きの流れに基づいて腕の向きや座標を順に取得し、アニメーションとして出力している。この手法により、入力された文字列を意味のある単語としてではなく、個々の文字の連なりとして捉えることが可能となり、多種多様な文字列に対するアニメーション表現を実現している。
## 4	モデリング
手旗信号は今でも艦艇同士の通信として利用されているとのことで、モデリングは海兵をイメージし、セーラー服を着た親しみやすいロボット人形をモデルとしている。ボディ全体にｚバッファによる陰面消去をしているのに対し、旗は陰面消去しないことで、手を前にクロスしても旗が埋め込まれないよう工夫している。
 
